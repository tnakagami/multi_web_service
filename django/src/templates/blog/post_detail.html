{% extends 'blog/breadcrumbs_blog.html' %}
{% load static %}
{% load humanize %}
{% load blog_extras %}
{% load django_bootstrap_breadcrumbs %}

{% block header %}
<link rel="stylesheet" href="{% static 'css/custom_checkbox.css' %}">
{# code syntax #}
<link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.16.2/build/styles/dracula.min.css">
<script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.16.2/build/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
{% endblock %}

{% block breadcrumbs %}
    {{ block.super }}
    {% breadcrumb post.title "blog:post_detail" post.pk %}
{% endblock %}

{% block content %}
{% if user.is_authenticated  %}
<div class="row justify-content-center">
    <div class="col-12">
        <article>
            {% if post.is_public or post.user.pk == user.pk %}
            <div class="row">
                <div class="col-12">
                    <h1 class="h1">{{ post.title }}</h1>
                </div>
            </div>
            <div class="row">
                <div class="col-12">
                    <time datetime="{{ post.updated_at|date:'Y-m-d' }}">{{ post.updated_at|naturaltime }}に更新</time>
                    {% for tag in post.tags.all %}
                    <span class="tag-no-click" data-pk="{{ tag.pk }}">{{ tag.name }}</span>
                    {% endfor %}
                </div>
            </div>
            <div class="row">
                <div class="col-12">
                    {{ post.text|markdown2html }}
                </div>
            </div>
            {% else %}
            記事を表示する権限がありません。
            {% endif %}
        </article>
    </div>
</div>
{% else %}
<div class="row justify-content-center">
    <div class="col-12">
        ログイン後にブログの内容が表示されます。
    </div>
</div>
{% endif %}
{% endblock %}
