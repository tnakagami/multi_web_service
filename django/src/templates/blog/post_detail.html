{% extends 'base.html' %}
{% load static %}
{% load humanize %}
{% load blog_extras %}

{% block header %}
<link rel="stylesheet" href="{% static 'css/custom_checkbox.css' %}">
{# code syntax #}
<link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.16.2/build/styles/dracula.min.css">
<script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.16.2/build/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
{% endblock %}

{% block content %}
{% if user.is_authenticated  %}
<div class="row justify-content-center">
    <div class="col-12">
        <article>
            <div class="row">
                <div class="col-8">
                    <h1 class="h1">{{ post.title }}</h1>
                </div>
                {% if post.user.pk == user.pk %}
                <div class="col-2">
                    <a href="{% url 'blog:post_update' post.pk %}" class="btn btn-success btn-block">編集</a>
                </div>
                <div class="col-2">
                    削除
                </div>
                {% else %}
                <div class="col-4"></div>
                {% endif %}
            </div>
            <div class="row">
                <div class="col-12">
                    <time datetime="{{ post.updated_at|date:'Y-m-d' }}">{{ post.updated_at|naturaltime }}に更新</time>
                    {% for tag in post.tags.all %}
                    <span data-pk="{{ tag.pk }}">{{ tag.name }}</span>
                    {% endfor %}
                </div>
            </div>
            <div class="row">
                <div class="col-12">
                    {{ post.text|markdown2html }}
                </div>
            </div>
        </article>
    </div>
</div>
{% else %}
<div class="row justify-content-center">
    <div class="col-12">
        ログイン後にブログの内容が表示されます。
    </div>
</div>
{% endif %}
{% endblock %}
